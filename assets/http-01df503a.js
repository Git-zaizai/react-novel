function l(e){return new URLSearchParams(e).toString()}async function c(e){const{method:o,data:s,url:a,bacsURL:L,requsetType:h="json",...I}=e;let t={...I,url:/https?:\/\//.test(a)?a:L+a,headers:null,method:o.toUpperCase()};h==="json"?t.headers={"Content-Type":"application/json;charset=utf-8"}:t.headers={"Content-Type":"multipart/form-data"};const i=JSON.parse(localStorage.getItem("token"));i&&(t.headers.token=i),o==="get"?t.url=t.url+"?"+l(s):t.body=JSON.stringify(s);try{const r=await fetch(t.url,t);if(r.status===401){const _=await r.text();return Promise.reject(_)}if(r.status!==200){const _=await r.text();return Promise.reject(_)}const n=await r.json();return n.code===200?n.data:n}catch(r){return Promise.reject(r)}}function E(e){return{bacsURL:e,get:function(o,s){return c({bacsURL:e,method:"get",url:o,data:s})},post:function(o,s){return c({bacsURL:e,method:"post",url:o,data:s})},request:c}}const{VITE_GLOB_API_URL:u,VITE_GLOB_API_URL_PREFIX:R}={VITE_GLOB_API_URL:"https://xiaoheizishiba.top",VITE_GLOB_IMG_URL:"https://xiaoheizishiba.top",VITE_GLOB_API_URL_PREFIX:"/gadgets",VITE_GLOB_ROUTER_FN:"BrowserRouter",VITE_GLOB_ROUTER_PREFIX:"/reactnovel",VITE_BASE_URL:"/reactnovel",VITE_GLOB_WOL_API_URL:"http://43.136.78.53:4399",VITE_GLOB_WOL_API_URL_PREFIX:"",BASE_URL:"/reactnovel",MODE:"production",DEV:!1,PROD:!0,SSR:!1};let p="";p=R?u+R:u;const f=E(p);export{E as c,f as h};
