import{a as p,j as e,B as u}from"./index-7ee441ac.js";import{C as w}from"./cuIcon-525887b3.js";import{V as x}from"./index-2766be9f.js";import{h as i}from"./http-21f83e32.js";import{F as a}from"./index-ac544244.js";import{I as m}from"./index-d7749322.js";import"./index-e1fd296a.js";import"./EllipsisOutlined-936bc574.js";const h="_view_1g5r1_1",f="_circleCard_1g5r1_7",y="_RadioButtonIcontag_1g5r1_11",j="_RadioButtonIconmedal_1g5r1_15",c={view:h,circleCard:f,RadioButtonIcontag:y,RadioButtonIconmedal:j},{TextArea:_}=m,F=()=>{const[r]=a.useForm(),[l,{toggle:s}]=p(),d=[],g=async t=>{s();try{if(d.includes(t.name)){window.$message.warning(`已有 ${t.anme} ${t.type?"记录类型":"标签"}`);return}if((await i.post("/curd-mongo/find/tabs",{where:{name:t.name}})).length){window.$message.warning(`已有 ${t.anme} 的申请记录`);return}const o=await i.post("/curd-mongo/add/tabs",{data:{type:t.type,name:t.name,txt:t.txt,reply:"",adddate:new Date}});o!=null&&o.acknowledged&&(window.$message.success("提交申请成功"),r.setFieldsValue({type:1,name:"",txt:""}))}catch(n){window.$message.error("申请失败"),console.log(n)}finally{setTimeout(()=>{s()},1e3)}};return e.jsxs("div",{className:c.view,children:[e.jsx("div",{style:{height:"calc(var(--Header-height) + 20px)"}}),e.jsx(x,{className:c.circleCard,title:e.jsxs("div",{className:"flex",children:[e.jsx(w,{icon:"tag",size:"22",color:"var(--primary-color)",className:"mr-10"}),e.jsx("h4",{className:"wax-100 singe-line",children:"标签添加申请"})]}),children:e.jsxs(a,{form:r,onFinish:g,initialValues:{type:1},children:[e.jsx(a.Item,{name:"name",rules:[{required:!0,message:"不能为空"}],validateTrigger:"onBlur",children:e.jsx(m,{placeholder:"记录类型与标签 名",allowClear:!0})}),e.jsx(a.Item,{name:"txt",validateTrigger:"onBlur",children:e.jsx(_,{allowClear:!0,placeholder:"说明",autoSize:{minRows:2,maxRows:7}})}),e.jsx(u,{type:"primary",htmlType:"submit",className:"mt-5",block:!0,loading:l,children:"提交"})]})})]})};export{F as default};
