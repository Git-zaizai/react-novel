function E(e){return new URLSearchParams(e).toString()}async function i(e){const{method:s,data:o,url:a,bacsURL:L,requsetType:h="json",...I}=e;let t={...I,url:/https?:\/\//.test(a)?a:L+a,headers:null,method:s.toUpperCase()};h==="json"?t.headers={"Content-Type":"application/json;charset=utf-8"}:t.headers={"Content-Type":"multipart/form-data"};const c=JSON.parse(localStorage.getItem("token"));c&&(t.headers.token=c),s==="get"?t.url=t.url+"?"+E(o):t.body=JSON.stringify(o);try{const r=await fetch(t.url,t);if(r.status===401){const _=await r.text();return Promise.reject(_)}if(r.status!==200){const _=await r.text();return Promise.reject(_)}const n=await r.json();return n.code===200?n.data:n}catch(r){return Promise.reject(r)}}function l(e){return{bacsURL:e,get:function(s,o){return i({bacsURL:e,method:"get",url:s,data:o})},post:function(s,o){return i({bacsURL:e,method:"post",url:s,data:o})},request:i}}const{VITE_GLOB_API_URL:u,VITE_GLOB_API_URL_PREFIX:R}={VITE_GLOB_API_URL:"https://xiaoheizishiba.top",VITE_GLOB_IMG_URL:"https://xiaoheizishiba.top",VITE_GLOB_API_URL_PREFIX:"/gadgets",VITE_GLOB_ROUTER_FN:"BrowserRouter",VITE_GLOB_ROUTER_PREFIX:"/reactnovel",VITE_BASE_URL:"/",VITE_GLOB_WOL_API_URL:"http://43.136.78.53:4399",VITE_GLOB_WOL_API_URL_PREFIX:"",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};let p="";p=R?u+R:u;const f=l(p);export{l as c,f as h};
