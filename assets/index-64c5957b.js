import{a as r,r as s,q as f}from"./index-2bee2ced.js";import{c as d}from"./create-global-store-ba03d94f.js";import{h as n}from"./http-01df503a.js";const[h,p]=d(()=>{const[c,{toggle:g}]=r(!1),[t,o]=s.useState({admin:!1,name:""});function i(e){o(w=>({...w,...e}))}const[l,{toggle:m}]=r(!1),[u,S]=s.useState({action:"add",data:null}),a=async()=>{if(localStorage.getItem("token")){await n.post("/verify").catch(()=>{localStorage.removeItem("token"),window.$message.warning("请重新登录")}),t.admin=!0;let e=await n.get("/verifyUser");e==="root"&&(t.name=e),o({...t})}};return f(()=>{a()}),{userStore:t,setUserStore:i,settingTwoShow:c,toggleSettingTwoShow:g,addDrawerShow:l,toggleAddDrawerShow:m,novelFormData:u,setNovelFormData:S,initUserVerify:a}}),U=h,A=p;export{A as g,U as u};
