import{i as b,f as N,r as m,h as _,k as y,R as r,j as s,a as z,B as W}from"./index-7ee441ac.js";import{C as E}from"./cuIcon-525887b3.js";import{r as T,u as B}from"./viewdata-73f96ad8.js";import{c as j}from"./index-ab6ddabd.js";import{u as M}from"./index-f93ef5ae.js";import{C as D}from"./index-e1fd296a.js";import{u as $,d as R,a as p,I as x,D as H}from"./index-cd74f31e.js";import{T as f,S}from"./index-ac6a781e.js";import{h as w}from"./http-21f83e32.js";function O(){var e=(typeof global>"u"?"undefined":typeof global)=="object"&&global&&global.Object===Object&&global,t=typeof self=="object"&&self&&self.Object===Object&&self;return e||t}O()||(global.Date=Date);function F(e,t){var n;b&&(N(e)||console.error("useDebounceFn expected parameter is a function, got ".concat(typeof e)));var a=$(e),c=(n=t==null?void 0:t.wait)!==null&&n!==void 0?n:1e3,d=m.useMemo(function(){return R(function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return a.current.apply(a,_([],y(o),!1))},c,t)},[]);return p(function(){d.cancel()}),{run:d,cancel:d.cancel,flush:d.flush}}const P=x("asterisk",!1,function(e){return r.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},r.createElement("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),r.createElement("path",{d:"M15 24H33",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),r.createElement("path",{d:"M19.5 16.2056L28.5 31.794",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),r.createElement("path",{d:"M28.5 16.2056L19.5 31.794",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),v=x("link-two",!0,function(e){return r.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},r.createElement("path",{d:"M30 19H20C15.5817 19 12 22.5817 12 27C12 31.4183 15.5817 35 20 35H36C40.4183 35 44 31.4183 44 27C44 24.9711 43.2447 23.1186 42 21.7084",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),r.createElement("path",{d:"M6 24.2916C4.75527 22.8814 4 21.0289 4 19C4 14.5817 7.58172 11 12 11H28C32.4183 11 36 14.5817 36 19C36 23.4183 32.4183 27 28 27H18",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),A=x("tag-one",!0,function(e){return r.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},r.createElement("path",{d:"M42.1691 29.2451L29.2631 42.1511C28.5879 42.8271 27.6716 43.2069 26.7161 43.2069C25.7606 43.2069 24.8444 42.8271 24.1691 42.1511L8 26V8H26L42.1691 24.1691C43.5649 25.5732 43.5649 27.841 42.1691 29.2451Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.5 21C19.8807 21 21 19.8807 21 18.5C21 17.1193 19.8807 16 18.5 16C17.1193 16 16 17.1193 16 18.5C16 19.8807 17.1193 21 18.5 21Z",fill:e.colors[2]}))}),Z="_novelCard_1aflw_1",V="_novelCardPeizhu_1aflw_10",G="_novelCarddiwan_1aflw_18",U="_Tagsview_1aflw_33",q="_novelCardLinkBut_1aflw_37",h={novelCard:Z,novelCardPeizhu:V,novelCarddiwan:G,Tagsview:U,novelCardLinkBut:q};function I({txt:e}){const[t,{toggle:n}]=z("nowrap","normal");if(e)return s.jsxs("div",{onClick:n,style:{whiteSpace:t},className:h.novelCardPeizhu+" singe-line mt-15",children:[s.jsx("span",{style:{color:"var(--text-color-3)"},children:"备注："}),e]})}function k({link:e}){if(e.urli!=="")return s.jsx(W,{type:"dashed",className:h.novelCardLinkBut,icon:s.jsx(v,{theme:"outline",size:"15"}),onClick:()=>{j(e.urli,t=>window.$message.success(t))},children:e.linkName})}function J({link:e,linkback:t,links:n}){if(!(!e&&!t&&!n.length))return s.jsxs(S,{size:[14,7],wrap:!0,className:"mt-10",children:[s.jsx(k,{link:{linkName:"首链接",urli:e}}),s.jsx(k,{link:{linkName:"后续链接",urli:t}}),n.map((a,c)=>s.jsx(k,{link:a},c))]})}function K({start:e,finish:t}){return!e&&!t?null:s.jsxs("div",{className:"flex-ai-c mt-10",children:[s.jsx(P,{theme:"outline",size:"18",fill:"var(--success-color)"}),s.jsxs("h4",{className:h.cardExtra+" ml-10",children:["第 ",e||"?"," - ",t||"?"," 章"]}),s.jsx(f,{color:T(),className:"ml-auto",children:"完结"})]})}const Q=m.memo(K),X=m.memo(J),Y=[{key:"update",label:s.jsx("h4",{className:"text-align",children:"修改"})},{key:"delete",label:s.jsx("h4",{className:"text-align",children:"删除"})}],ee=({data:e,index:t,style:n,ReadoffClick:a,dropdownClick:c})=>{const d=o=>{c&&c(o.key,e)};return s.jsxs(D,{style:n,className:h.novelCard,bordered:!1,hoverable:!0,title:s.jsxs("div",{className:"flex",children:[s.jsx(H,{menu:{items:Y,onClick:d},placement:"bottomLeft",arrow:{pointAtCenter:!0},children:s.jsx(E,{icon:"hot",size:"22",color:"var(--primary-color)",className:"mr-10"})}),s.jsx("h4",{className:"wax-100 singe-line",onClick:()=>j(e.title,o=>window.$message.success(o)),children:e.title})]}),extra:e.duwan===1?s.jsxs("div",{className:"flex-ai-c",children:[s.jsx(f,{color:"var(--success-color)",className:"ml-auto",onClick:()=>a(e),children:"读完"}),s.jsx("h5",{className:"ml-5",children:t??""})]}):s.jsxs("div",{className:"flex-ai-c",children:[s.jsx("div",{className:h.novelCarddiwan+"ml-auto mr-5",onClick:()=>a(e),children:"未读完"}),s.jsx("h5",{className:"ml-5",children:t??""})]}),children:[s.jsxs("div",{className:`flex-ai-c flex-wrap ${h.Tagsview}`,children:[s.jsx(A,{theme:"outline",size:"18",fill:"var(--success-color)",className:"mr-5 el-transition-color"}),"标签：",e.tabs.map(o=>s.jsx(f,{color:o.color,children:o.tab},o.tab))]}),s.jsx(Q,{start:e.start,finish:e.finish}),s.jsxs("h4",{className:"flex-ai-c mt-10",children:[s.jsx(v,{theme:"outline",size:"18",fill:"var(--success-color)",className:"mr-5"}),"链接："]}),s.jsx(X,{link:e.link,linkback:e.linkback,links:e.links}),s.jsx(I,{txt:e.beizhu})]})},ue=({data:e})=>{const{toggleAddDrawerShow:t,setNovelFormData:n}=M(),{deleteNovelItem:a,updateNovelItem:c}=B(),d=m.useCallback(async(i,l)=>{i==="update"?(n({action:i,data:l}),t()):await window.$modal.confirm({okText:"删除",okType:"danger",maskClosable:!0,centered:!0,cancelText:"取消",title:"删除小说",content:`是否将 （${l.title}） 删除`})&&(await w.post("/mong/novel/update",{_id:l._id,isdel:0}).catch(L=>(window.$message.error("删除失败"),Promise.reject(L)))===1?(a(l._id),window.$message.success("删除成功")):window.$message.error("删除失败"))}),{run:o}=F(async i=>{const l=+!i.duwan;await w.post("/mong/novel/update",{_id:i._id,duwan:l})?(i.duwan=l,c(i),window.$message.success("修改成功")):window.$message.error("失败")},{wait:500}),u=m.useCallback(o,[]),C=m.useMemo(()=>e.map((i,l)=>s.jsx(ee,{data:i,index:l,dropdownClick:d,ReadoffClick:u},i._id)),[e]);return s.jsx(s.Fragment,{children:C})};export{ue as N};
