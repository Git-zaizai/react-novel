import{j as s,r as l}from"./index-cb5f5546.js";import{S as r}from"./index-f181448a.js";import{T as p}from"./Transition-45e03733.js";import{u as j,N as _}from"./index-66b94434.js";import{u as b,a as v}from"./viewdata-f41ba799.js";import{C as g}from"./cuIcon-4967541d.js";import{i as A}from"./index-32cc6cdd.js";import"./index-ae17524f.js";const w="_view_1b3hu_1",N="_cardindex_1b3hu_8",E="_carppeizhu_1b3hu_13",k="_Affixicon_1b3hu_21",y="_Affixview_1b3hu_26",S="_cardbut_1b3hu_46",z="_cardExtra_1b3hu_51",f={view:w,cardindex:N,carppeizhu:E,Affixicon:k,Affixview:y,cardbut:S,cardExtra:z},B=({active:t=!0})=>s.jsxs("div",{className:"flex",style:{flexDirection:"column",padding:"0 10px",marginBottom:"30px"},children:[s.jsx(r.Input,{block:!0,active:t}),s.jsxs("div",{className:"flex-jusp mt-10",children:[s.jsx(r.Button,{active:t}),s.jsx(r.Button,{active:t}),s.jsx(r.Button,{active:t}),s.jsx(r.Button,{active:t}),s.jsx(r.Button,{active:t})]}),s.jsxs("div",{className:"flex-fdc-aic-juc mt-10",children:[s.jsx(r.Input,{style:{height:"20px"},size:"small",block:!0,active:t}),s.jsx(r.Input,{size:"large",block:!0,active:t,className:"mt-5"})]})]}),L=({show:t=!0,leng:a=4,children:c})=>{const o=Array.from({length:a}).map((i,n)=>s.jsx(B,{},n));return s.jsx(p,{show:t,children:s.jsx("div",{children:t?o:c})})};function C(t){const a=A()?5:8;let c={Affix:"推荐",data:[]},o={Affix:"小说",data:[]};for(const i of t)i.tabs.some(n=>n.tab==="推荐")&&c.data.push(i),o.data.length<a&&i.tabs.some(n=>n.tab==="小说")&&o.data.push(i);return[o,c]}const G=()=>{console.log("index 路由页面");const{initTabs:t,novel:a,initNovel:c}=b(),[o,{toggle:i}]=v(!0),[n,x]=l.useState([]);l.useEffect(()=>{t().then(c).then(()=>{const e=C(a.novelList);x(e),i(!1)})},[a.novelList]);const m=l.useRef([]),{run:d}=j(e=>{},{wait:500});return l.useEffect(()=>{const e=document.querySelector("#zaiViewId");return e.addEventListener("scroll",d),()=>{e.removeEventListener("scroll",d)}},[]),s.jsx(s.Fragment,{children:s.jsx(L,{show:o,children:n.map((e,u)=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex-ai-c mb-5 "+f.Affixview,ref:h=>m.current[u]=h,children:[s.jsxs("h2",{children:[" ",e.Affix]}),s.jsx(g,{icon:"play_forward_fill",color:"var(--success-color)",className:f.Affixicon+" ml-10"})]}),s.jsx("div",{className:f.view,children:s.jsx(_,{data:e.data})},u)]},u))})})};export{G as default};
